#Libraries imported in python
from tkinter import *
import tkinter as tk
from geopy.geocoders import Nominatim
from tkinter import ttk,messagebox
from timezonefinder import TimezoneFinder
from datetime import datetime
import requests
import pytz

root=Tk()
root.title("Weather App")
root.geometry("900x500+300+200")
root.resizable (False, False)

#Detail to be displayed in the weather app

def getWeather():
    try:
        city=textfield.get()
        geolocator = Nominatim(user_agent="geoapiExercises")
        location = geolocator.geocode(city)
        obj = TimezoneFinder()
        result = obj.timezone_at (lng=location.longitude,lat=location.latitude)
        home=pytz.timezone (result)
        local_time=datetime.now(home)
        current_time=local_time.strftime("%I:%M %p")
        clock.config(text=current_time)
        name.config(text="CURRENT WEATHER")

        #weather

        api="https://api.openweathermap.org/data/3.0/onecall?lat="+city+"&appid=cf0833e315dc0fbec8baf38e4e8f36cf"
        json_data=requests.get(api).json()
        condition=json_data['weather'][0]['main']
        description= json_data['weather'][0]['description']
        temp=int(json_data['main']['temp' ]-273.15)
        t.config(text=(temp, "°"))
        c.config(text=(condition, "I", "FEELS", "LIKE", temp, "°"))
    except Exception asdit:
        messagebox.showerror("Weather App","Invalid Entry !!") 

textfield=tk.Entry(root, justify="center", width=17, font=("poppins", 25, "bold"), bg="#484848",border=0,fg="white")
textfield.place( x = 40,y = 40 )
textfield.focus()


